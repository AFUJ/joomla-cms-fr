function sendPermissions(e){var t=document.getElementById("icon_"+this.id);t.removeAttribute("class"),t.setAttribute("style","background: url(../media/system/images/modal/spinner.gif); display: inline-block; width: 16px; height: 16px");var r="not",a=getUrlParam("component"),s=getUrlParam("extension"),i=getUrlParam("option"),n=getUrlParam("view"),o=a,l=this.value;"com_config"==i&&0==a&&0==s?r="root.1":0==s&&"component"==n?r=a:0!=s&&0!=n?(r=s+"."+n+"."+getUrlParam("id"),o=document.getElementById("jform_title").value):0==s&&0!=n&&(r=i+"."+n+"."+getUrlParam("id"),o=document.getElementById("jform_title").value);var m=this.id.replace("jform_rules_",""),c=m.lastIndexOf("_"),u=m.substring(0,c),d=m.substring(c+1),g="&comp="+r+"&action="+u+"&rule="+d+"&value="+l+"&title="+o,p="index.php?option=com_config&task=config.store&format=raw"+g;jQuery.ajax({type:"GET",url:p,datatype:"JSON"}).success(function(r){var a=e.target,s=JSON.parse(r),i=JSON.parse(s.data);if(1==i.result)t.removeAttribute("style"),t.setAttribute("class","icon-save"),jQuery(a).parents().next("td").find("span").removeClass().addClass(i["class"]).html(i.text);else{var n={error:[s.message]};Joomla.renderMessages(n),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")}}).fail(function(){var e={error:[Joomla.JText._("JLIB_RULES_REQUEST_FAILURE")]};Joomla.renderMessages(e),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")})}function getUrlParam(e){for(var t=window.location.search.substring(1),r=t.split("&"),a=0;a<r.length;a++){var s=r[a].split("=");if(s[0]==e)return s[1]}return!1}
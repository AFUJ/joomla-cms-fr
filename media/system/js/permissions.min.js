function sendPermissions(b){var i=document.getElementById("icon_"+this.id);i.removeAttribute("class");i.setAttribute("style","background: url(../media/system/images/modal/spinner.gif); display: inline-block; width: 16px; height: 16px");var e="not";var j=getUrlParam("component");var n=getUrlParam("extension");var g=getUrlParam("option");var k=getUrlParam("view");var l=j;var m=this.value;if(g=="com_config"&&j==false&&n==false){e="root.1"}else{if(n==false&&k=="component"){e=j}else{if(n!=false&&k!=false){e=n+"."+k+"."+getUrlParam("id");l=document.getElementById("jform_title").value}else{if(n==false&&k!=false){e=g+"."+k+"."+getUrlParam("id");l=document.getElementById("jform_title").value}}}}var c=this.id.replace("jform_rules_","");var o=c.lastIndexOf("_");var d=c.substring(0,o);var h=c.substring(o+1);var f="&comp="+e+"&action="+d+"&rule="+h+"&value="+m+"&title="+l;var a="index.php?option=com_config&task=config.store&format=raw"+f;jQuery.ajax({type:"GET",url:a,datatype:"JSON"}).success(function(p){var q=b.target;var s=JSON.parse(p);if(s.data=="true"){i.removeAttribute("style");i.setAttribute("class","icon-save");if(m=="1"){jQuery(q).parents().next("td").find("span").removeClass("label label-important").addClass("label label-success").html("Allowed")}else{jQuery(q).parents().next("td").find("span").removeClass("label label-success").addClass("label label-important").html("Not Allowed.")}}else{var r={error:[Joomla.JText._("JLIB_RULES_DATABASE_FAILURE ")]};Joomla.renderMessages(r);i.removeAttribute("style");i.setAttribute("class","icon-cancel")}if(s.message==0){var r={error:[Joomla.JText._("JLIB_RULES_SAVE_BEFORE_CHANGE_PERMISSIONS")]};Joomla.renderMessages(r);i.removeAttribute("style");i.setAttribute("class","icon-cancel")}}).fail(function(){var p={error:[Joomla.JText._("JLIB_RULES_REQUEST_FAILURE")]};Joomla.renderMessages(p);i.removeAttribute("style");i.setAttribute("class","icon-cancel")})}function getUrlParam(a){var c=window.location.search.substring(1);var d=c.split("&");for(var b=0;b<d.length;b++){var e=d[b].split("=");if(e[0]==a){return e[1]}}return false};

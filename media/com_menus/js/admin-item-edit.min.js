if(!window.Joomla)throw new Error("core.js was not properly initialised");Joomla.submitbutton=(e,t)=>{if("item.setType"===e||"item.setMenuType"===e){if("item.setType"===e){[].slice.call(document.querySelectorAll('#item-form input[name="jform[type]"]')).forEach((e=>{e.value=t})),document.getElementById("fieldtype").value="type"}else{[].slice.call(document.querySelectorAll('#item-form input[name="jform[menutype]"]')).forEach((e=>{e.value=t}))}Joomla.submitform("item.setType",document.getElementById("item-form"))}else if("item.cancel"===e||document.formvalidator.isValid(document.getElementById("item-form")))Joomla.submitform(e,document.getElementById("item-form"));else{document.querySelectorAll("#item-form .modal-value.invalid").forEach((e=>{e.parentElement.querySelector('.js-input-title, [type="text"]').classList.add("invalid")}))}},window.addEventListener("message",(e=>{e.origin===window.location.origin&&"joomla:content-select-menutype"===e.data.messageType&&Joomla.submitbutton("item.setType",e.data.encoded)}));const onChange=({target:e})=>{const t=e.value;Joomla.request({url:`index.php?option=com_menus&task=item.getParentItem&menutype=${t}`,headers:{"Content-Type":"application/json"},onSuccess(e){const t=JSON.parse(e),o=document.getElementById("jform_parent_id").closest("joomla-field-fancy-select");o.choicesInstance.clearChoices(),o.choicesInstance.setChoices([{id:"1",text:Joomla.Text._("JGLOBAL_ROOT_PARENT")}],"id","text",!1),t.forEach((e=>{const t={};t.innerText=e.title,t.id=e.id,o.choicesInstance.setChoices([t],"id","innerText",!1)})),o.choicesInstance.setChoiceByValue("1");const n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),document.getElementById("jform_parent_id").dispatchEvent(n)},onError:e=>{Joomla.renderMessages(Joomla.ajaxErrorsMessages(e))}})},element=document.getElementById("jform_menutype");element&&element.addEventListener("change",onChange),document.getElementById("item-form").addEventListener("submit",(()=>{document.getElementById("jform_params_login_redirect_url")&&document.getElementById("jform_params_logout_redirect_url")&&(document.getElementById("jform_params_login_redirect_url").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_login_redirect_menuitem_id").value=""),document.getElementById("jform_params_login_redirect_menuitem_name").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_login_redirect_url").value=""),document.getElementById("jform_params_logout_redirect_url").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_logout_redirect_menuitem_id").value=""),document.getElementById("jform_params_logout_redirect_menuitem_id").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_logout_redirect_url").value=""))}));
!function(t,e,n,i){"use strict";n.getSize=n.getSize||function(){return{x:n.innerWidth,y:n.innerHeight}},n.jInsertEditorText=function(t,n){e.editors.instances[n].replaceSelection(t)};var o={setupEditors:function(t){t=t||i;for(var n=e.getOptions?e.getOptions("plg_editor_tinymce",{}):e.optionsStorage.plg_editor_tinymce||{},o=t.querySelectorAll(".js-editor-tinymce"),r=0,s=o.length;s>r;r++){var a=o[r].querySelector("textarea");this.setupEditor(a,n)}},setupEditor:function(n,o){var r=n?n.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",s=o?o.tinyMCE||{}:{},a=s["default"]||{},u=s[r]?s[r]:a;u=e.extend({},u),n&&(u.selector=null,u.target=n),u.setupCallbackString&&!u.setup&&(u.setup=Function("editor",u.setupCallbackString));var c=new t.Editor(n.id,u,tinymce.EditorManager);c.render(),e.editors.instances[n.id]={getValue:function(){return this.instance.getContent()},setValue:function(t){return this.instance.setContent(t)},replaceSelection:function(t){return this.instance.execCommand("mceInsertContent",!1,t)},id:n.id,instance:c,onSave:function(){return this.instance.isHidden()&&this.instance.show(),""}},i.getElementById(c.id).form.addEventListener("submit",function(){e.editors.instances[c.targetElm.id].onSave()})}};e.JoomlaTinyMCE=o,i.addEventListener("DOMContentLoaded",function(){e.JoomlaTinyMCE.setupEditors(),n.jQuery&&jQuery(i).on("subform-row-add",function(t,n){e.JoomlaTinyMCE.setupEditors(n)})})}(tinyMCE,Joomla,window,document);

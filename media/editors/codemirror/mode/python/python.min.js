!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){return new RegExp("^(("+a.join(")|(")+"))\\b")}function c(a){return a.scopes[a.scopes.length-1]}var d=b(["and","or","not","is"]),e=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],f=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],g={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},h={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None","async","await"]};a.registerHelper("hintWords","python",e.concat(f)),a.defineMode("python",function(i,j){function k(a,b){if(a.sol()&&(b.indent=a.indentation()),a.sol()&&"py"==c(b).type){var d=c(b).offset;if(a.eatSpace()){var e=a.indentation();return e>d?n(b):d>e&&p(a,b)&&(b.errorToken=!0),null}var f=l(a,b);return d>0&&p(a,b)&&(f+=" "+r),f}return l(a,b)}function l(a,b){if(a.eatSpace())return null;var c=a.peek();if("#"==c)return a.skipToEnd(),"comment";if(a.match(/^[0-9\.]/,!1)){var e=!1;if(a.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(e=!0),a.match(/^\d+\.\d*/)&&(e=!0),a.match(/^\.\d+/)&&(e=!0),e)return a.eat(/J/i),"number";var f=!1;if(a.match(/^0x[0-9a-f]+/i)&&(f=!0),a.match(/^0b[01]+/i)&&(f=!0),a.match(/^0o[0-7]+/i)&&(f=!0),a.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(a.eat(/J/i),f=!0),a.match(/^0(?![\dx])/i)&&(f=!0),f)return a.eat(/L/i),"number"}return a.match(B)?(b.tokenize=m(a.current()),b.tokenize(a,b)):a.match(v)||a.match(u)?"punctuation":a.match(t)||a.match(w)?"operator":a.match(s)?"punctuation":"."==b.lastToken&&a.match(x)?"property":a.match(C)||a.match(d)?"keyword":a.match(D)?"builtin":a.match(/^(self|cls)\b/)?"variable-2":a.match(x)?"def"==b.lastToken||"class"==b.lastToken?"def":"variable":(a.next(),r)}function m(a){function b(b,e){for(;!b.eol();)if(b.eatWhile(/[^'"\\]/),b.eat("\\")){if(b.next(),c&&b.eol())return d}else{if(b.match(a))return e.tokenize=k,d;b.eat(/['"]/)}if(c){if(j.singleLineStringErrors)return r;e.tokenize=k}return d}for(;"rub".indexOf(a.charAt(0).toLowerCase())>=0;)a=a.substr(1);var c=1==a.length,d="string";return b.isString=!0,b}function n(a){for(;"py"!=c(a).type;)a.scopes.pop();a.scopes.push({offset:c(a).offset+i.indentUnit,type:"py",align:null})}function o(a,b,c){var d=a.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:a.column()+1;b.scopes.push({offset:b.indent+y,type:c,align:d})}function p(a,b){for(var d=a.indentation();c(b).offset>d;){if("py"!=c(b).type)return!0;b.scopes.pop()}return c(b).offset!=d}function q(a,b){var d=b.tokenize(a,b),e=a.current();if("@"==e)return j.version&&3==parseInt(j.version,10)?a.match(x,!1)?"meta":"operator":a.match(x,!1)?"meta":r;"variable"!=d&&"builtin"!=d||"meta"!=b.lastToken||(d="meta"),("pass"==e||"return"==e)&&(b.dedent+=1),"lambda"==e&&(b.lambda=!0),":"!=e||b.lambda||"py"!=c(b).type||n(b);var f=1==e.length?"[({".indexOf(e):-1;if(-1!=f&&o(a,b,"])}".slice(f,f+1)),f="])}".indexOf(e),-1!=f){if(c(b).type!=e)return r;b.indent=b.scopes.pop().offset-y}return b.dedent>0&&a.eol()&&"py"==c(b).type&&(b.scopes.length>1&&b.scopes.pop(),b.dedent-=1),d}var r="error",s=j.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,t=j.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/,u=j.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/,v=j.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/;if(j.version&&3==parseInt(j.version,10))var w=j.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/,x=j.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;else var w=j.singleOperators||/^[\+\-\*\/%&|\^~<>!]/,x=j.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;var y=j.hangingIndent||i.indentUnit,z=e,A=f;if(void 0!=j.extra_keywords&&(z=z.concat(j.extra_keywords)),void 0!=j.extra_builtins&&(A=A.concat(j.extra_builtins)),j.version&&3==parseInt(j.version,10)){z=z.concat(h.keywords),A=A.concat(h.builtins);var B=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{z=z.concat(g.keywords),A=A.concat(g.builtins);var B=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var C=b(z),D=b(A),E={startState:function(a){return{tokenize:k,scopes:[{offset:a||0,type:"py",align:null}],indent:a||0,lastToken:null,lambda:!1,dedent:0}},token:function(a,b){var c=b.errorToken;c&&(b.errorToken=!1);var d=q(a,b);return d&&"comment"!=d&&(b.lastToken="keyword"==d||"punctuation"==d?a.current():d),"punctuation"==d&&(d=null),a.eol()&&b.lambda&&(b.lambda=!1),c?d+" "+r:d},indent:function(b,d){if(b.tokenize!=k)return b.tokenize.isString?a.Pass:0;var e=c(b),f=e.type==d.charAt(0);return null!=e.align?e.align-(f?1:0):e.offset-(f?y:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return E}),a.defineMIME("text/x-python","python");var i=function(a){return a.split(" ")};a.defineMIME("text/x-cython",{name:"python",extra_keywords:i("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})});
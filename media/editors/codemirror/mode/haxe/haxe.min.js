!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("haxe",function(a,b){function c(a){return{type:a,style:"keyword"}}function d(a,b,c){return b.tokenize=c,c(a,b)}function e(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!0;d=!d&&"\\"==c}}function f(a,b,c){return T=a,U=c,b}function g(a,b){var c=a.next();if('"'==c||"'"==c)return d(a,b,h(c));if(/[\[\]{}\(\),;\:\.]/.test(c))return f(c);if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),f("number","number");if(/\d/.test(c)||"-"==c&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),f("number","number");if(b.reAllowed&&"~"==c&&a.eat(/\//))return e(a,"/"),a.eatWhile(/[gimsu]/),f("regexp","string-2");if("/"==c)return a.eat("*")?d(a,b,i):a.eat("/")?(a.skipToEnd(),f("comment","comment")):(a.eatWhile(ba),f("operator",null,a.current()));if("#"==c)return a.skipToEnd(),f("conditional","meta");if("@"==c)return a.eat(/:/),a.eatWhile(/[\w_]/),f("metadata","meta");if(ba.test(c))return a.eatWhile(ba),f("operator",null,a.current());var g;if(/[A-Z]/.test(c))return a.eatWhile(/[\w_<>]/),g=a.current(),f("type","variable-3",g);a.eatWhile(/[\w_]/);var g=a.current(),j=aa.propertyIsEnumerable(g)&&aa[g];return j&&b.kwAllowed?f(j.type,j.style,g):f("variable","variable",g)}function h(a){return function(b,c){return e(b,a)&&(c.tokenize=g),f("string","string")}}function i(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=g;break}d="*"==c}return f("comment","comment")}function j(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function k(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function l(a,b,c,d,e){var f=a.cc;for(da.state=a,da.stream=e,da.marked=null,da.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():w;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return da.marked?da.marked:"variable"==c&&k(a,d)?"variable-2":"variable"==c&&m(a,d)?"variable-3":b}}}function m(a,b){if(/[a-z]/.test(b.charAt(0)))return!1;for(var c=a.importedtypes.length,d=0;c>d;d++)if(a.importedtypes[d]==b)return!0}function n(a){for(var b=da.state,c=b.importedtypes;c;c=c.next)if(c.name==a)return;b.importedtypes={name:a,next:b.importedtypes}}function o(){for(var a=arguments.length-1;a>=0;a--)da.cc.push(arguments[a])}function p(){return o.apply(null,arguments),!0}function q(a){var b=da.state;if(b.context){da.marked="def";for(var c=b.localVars;c;c=c.next)if(c.name==a)return;b.localVars={name:a,next:b.localVars}}}function r(){da.state.context||(da.state.localVars=ea),da.state.context={prev:da.state.context,vars:da.state.localVars}}function s(){da.state.localVars=da.state.context.vars,da.state.context=da.state.context.prev}function t(a,b){var c=function(){var c=da.state;c.lexical=new j(c.indented,da.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function u(){var a=da.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function v(a){function b(c){return c==a?p():";"==a?o():p(b)}return b}function w(a){return"@"==a?p(B):"var"==a?p(t("vardef"),K,v(";"),u):"keyword a"==a?p(t("form"),x,w,u):"keyword b"==a?p(t("form"),w,u):"{"==a?p(t("}"),r,J,u,s):";"==a?p():"attribute"==a?p(A):"function"==a?p(O):"for"==a?p(t("form"),v("("),t(")"),M,v(")"),u,w,u):"variable"==a?p(t("stat"),F):"switch"==a?p(t("form"),x,t("}","switch"),v("{"),J,u,u):"case"==a?p(x,v(":")):"default"==a?p(v(":")):"catch"==a?p(t("form"),r,v("("),S,v(")"),w,u,s):"import"==a?p(D,v(";")):"typedef"==a?p(E):o(t("stat"),x,v(";"),u)}function x(a){return ca.hasOwnProperty(a)?p(z):"type"==a?p(z):"function"==a?p(O):"keyword c"==a?p(y):"("==a?p(t(")"),y,v(")"),u,z):"operator"==a?p(x):"["==a?p(t("]"),I(y,"]"),u,z):"{"==a?p(t("}"),I(H,"}"),u,z):p()}function y(a){return a.match(/[;\}\)\],]/)?o():o(x)}function z(a,b){if("operator"==a&&/\+\+|--/.test(b))return p(z);if("operator"==a||":"==a)return p(x);if(";"!=a)return"("==a?p(t(")"),I(x,")"),u,z):"."==a?p(G,z):"["==a?p(t("]"),x,v("]"),u,z):void 0}function A(a){return"attribute"==a?p(A):"function"==a?p(O):"var"==a?p(K):void 0}function B(a){return":"==a?p(B):"variable"==a?p(B):"("==a?p(t(")"),I(C,")"),u,w):void 0}function C(a){return"variable"==a?p():void 0}function D(a,b){return"variable"==a&&/[A-Z]/.test(b.charAt(0))?(n(b),p()):"variable"==a||"property"==a||"."==a||"*"==b?p(D):void 0}function E(a,b){return"variable"==a&&/[A-Z]/.test(b.charAt(0))?(n(b),p()):"type"==a&&/[A-Z]/.test(b.charAt(0))?p():void 0}function F(a){return":"==a?p(u,w):o(z,v(";"),u)}function G(a){return"variable"==a?(da.marked="property",p()):void 0}function H(a){return"variable"==a&&(da.marked="property"),ca.hasOwnProperty(a)?p(v(":"),x):void 0}function I(a,b){function c(d){return","==d?p(a,c):d==b?p():p(v(b))}return function(d){return d==b?p():o(a,c)}}function J(a){return"}"==a?p():o(w,J)}function K(a,b){return"variable"==a?(q(b),p(P,L)):p()}function L(a,b){return"="==b?p(x,L):","==a?p(K):void 0}function M(a,b){return"variable"==a?(q(b),p(N,x)):o()}function N(a,b){return"in"==b?p():void 0}function O(a,b){return"variable"==a||"type"==a?(q(b),p(O)):"new"==b?p(O):"("==a?p(t(")"),r,I(S,")"),u,P,w,s):void 0}function P(a){return":"==a?p(Q):void 0}function Q(a){return"type"==a?p():"variable"==a?p():"{"==a?p(t("}"),I(R,"}"),u):void 0}function R(a){return"variable"==a?p(P):void 0}function S(a,b){return"variable"==a?(q(b),p(P)):void 0}var T,U,V=a.indentUnit,W=c("keyword a"),X=c("keyword b"),Y=c("keyword c"),Z=c("operator"),$={type:"atom",style:"atom"},_={type:"attribute",style:"attribute"},T=c("typedef"),aa={"if":W,"while":W,"else":X,"do":X,"try":X,"return":Y,"break":Y,"continue":Y,"new":Y,"throw":Y,"var":c("var"),inline:_,"static":_,using:c("import"),"public":_,"private":_,cast:c("cast"),"import":c("import"),macro:c("macro"),"function":c("function"),"catch":c("catch"),untyped:c("untyped"),callback:c("cb"),"for":c("for"),"switch":c("switch"),"case":c("case"),"default":c("default"),"in":Z,never:c("property_access"),trace:c("trace"),"class":T,"abstract":T,"enum":T,"interface":T,typedef:T,"extends":T,"implements":T,dynamic:T,"true":$,"false":$,"null":$},ba=/[+\-*&%=<>!?|]/,ca={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},da={state:null,column:null,marked:null,cc:null},ea={name:"this",next:null};return s.lex=!0,u.lex=!0,{startState:function(a){var c=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];return{tokenize:g,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new j((a||0)-V,0,"block",!1),localVars:b.localVars,importedtypes:c,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==T?c:(b.reAllowed=!("operator"!=T&&"keyword c"!=T&&!T.match(/^[\[{}\(,;:]$/)),b.kwAllowed="."!=T,l(b,c,T,U,a))},indent:function(a,b){if(a.tokenize!=g)return 0;var c=b&&b.charAt(0),d=a.lexical;"stat"==d.type&&"}"==c&&(d=d.prev);var e=d.type,f=c==e;return"vardef"==e?d.indented+4:"form"==e&&"{"==c?d.indented:"stat"==e||"form"==e?d.indented+V:"switch"!=d.info||f?d.align?d.column+(f?0:1):d.indented+(f?0:V):d.indented+(/^(?:case|default)\b/.test(b)?V:2*V)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),a.defineMIME("text/x-haxe","haxe"),a.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(a,b){var c=a.peek(),d=a.sol();if("#"==c)return a.skipToEnd(),"comment";if(d&&"-"==c){var e="variable-2";return a.eat(/-/),"-"==a.peek()&&(a.eat(/-/),e="keyword a"),"D"==a.peek()&&(a.eat(/[D]/),e="keyword c",b.define=!0),a.eatWhile(/[A-Z]/i),e}var c=a.peek();return 0==b.inString&&"'"==c&&(b.inString=!0,c=a.next()),1==b.inString?(a.skipTo("'")||a.skipToEnd(),"'"==a.peek()&&(a.next(),b.inString=!1),"string"):(a.next(),null)},lineComment:"#"}}),a.defineMIME("text/x-hxml","hxml")});
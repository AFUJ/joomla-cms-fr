!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("julia",function(a,b){function c(a){return new RegExp("^(("+a.join(")|(")+"))\\b")}function d(a){var b=e(a);return"["==b?!0:!1}function e(a){return 0==a.scopes.length?null:a.scopes[a.scopes.length-1]}function f(a,b){if(a.match(/^#=\s*/)&&b.scopes.push("#="),"#="==e(b)&&a.match(/^=#/))return b.scopes.pop(),"comment";if(b.scopes.indexOf("#=")>=0)return a.match(/.*?(?=(#=|=#))/)||a.skipToEnd(),"comment";var c=b.leavingExpr;if(a.sol()&&(c=!1),b.leavingExpr=!1,c&&a.match(/^'+/))return"operator";if(a.match(/^\.{2,3}/))return"operator";if(a.eatSpace())return null;var f=a.peek();if("#"===f)return a.skipToEnd(),"comment";"["===f&&b.scopes.push("[");var m=e(b);"["==m&&"]"===f&&(b.scopes.pop(),b.leavingExpr=!0),"("==m&&")"===f&&(b.scopes.pop(),b.leavingExpr=!0);var n;if(!d(b)&&(n=a.match(t,!1))&&b.scopes.push(n),!d(b)&&a.match(u,!1)&&b.scopes.pop(),d(b)){if("end"==b.lastToken&&a.match(/^:/))return"operator";if(a.match(/^end/))return"number"}if(a.match(/^=>/))return"operator";if(a.match(/^[0-9\.]/,!1)){var o=RegExp(/^im\b/),p=!1;if(a.match(/^\d*\.(?!\.)\d+([ef][\+\-]?\d+)?/i)&&(p=!0),a.match(/^\d+\.(?!\.)\d*/)&&(p=!0),a.match(/^\.\d+/)&&(p=!0),a.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)&&(p=!0),p)return a.match(o),b.leavingExpr=!0,"number";var y=!1;if(a.match(/^0x[0-9a-f]+/i)&&(y=!0),a.match(/^0b[01]+/i)&&(y=!0),a.match(/^0o[0-7]+/i)&&(y=!0),a.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(y=!0),a.match(/^0(?![\dx])/i)&&(y=!0),y)return a.match(o),b.leavingExpr=!0,"number"}if(a.match(/^<:/))return"operator";if(a.match(x))return"builtin";if(!c&&a.match(w)||a.match(/:\./))return"builtin";if(a.match(/^{[^}]*}(?=\()/))return"builtin";if(a.match(j))return"operator";if(a.match(q))return b.tokenize=h(a.current()),b.tokenize(a,b);if(a.match(v))return"meta";if(a.match(k))return null;if(a.match(r))return"keyword";if(a.match(s))return"builtin";var z=b.isDefinition||"function"==b.lastToken||"macro"==b.lastToken||"type"==b.lastToken||"immutable"==b.lastToken;return a.match(l)?z?"."===a.peek()?(b.isDefinition=!0,"variable"):(b.isDefinition=!1,"def"):a.match(/^({[^}]*})*\(/,!1)?g(a,b):(b.leavingExpr=!0,"variable"):(a.next(),i)}function g(a,b){var c=a.match(/^(\(\s*)/);if(c&&(b.firstParenPos<0&&(b.firstParenPos=b.scopes.length),b.scopes.push("("),b.charsAdvanced+=c[1].length),"("==e(b)&&a.match(/^\)/)&&(b.scopes.pop(),b.charsAdvanced+=1,b.scopes.length<=b.firstParenPos)){var d=a.match(/^\s*?=(?!=)/,!1);return a.backUp(b.charsAdvanced),b.firstParenPos=-1,b.charsAdvanced=0,d?"def":"builtin"}if(a.match(/^$/g,!1)){for(a.backUp(b.charsAdvanced);b.scopes.length>b.firstParenPos+1;)b.scopes.pop();return b.firstParenPos=-1,b.charsAdvanced=0,"builtin"}return b.charsAdvanced+=a.match(/^([^()]*)/)[1].length,g(a,b)}function h(a){function c(c,g){for(;!c.eol();)if(c.eatWhile(/[^'"\\]/),c.eat("\\")){if(c.next(),d&&c.eol())return e}else{if(c.match(a))return g.tokenize=f,e;c.eat(/['"]/)}if(d){if(b.singleLineStringErrors)return i;g.tokenize=f}return e}for(;"bruv".indexOf(a.charAt(0).toLowerCase())>=0;)a=a.substr(1);var d="'"==a,e="string";return c.isString=!0,c}var i="error",j=b.operators||/^\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b(?!\()|[\u2208\u2209](?!\()/,k=b.delimiters||/^[;,()[\]{}]/,l=b.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*!*/,m=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],n=["end","else","elseif","catch","finally"],o=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"],p=["true","false","nothing","NaN","Inf"],q=/^(`|'|"{3}|([brv]?"))/,r=c(o),s=c(p),t=c(m),u=c(n),v=/^@[_A-Za-z][_A-Za-z0-9]*/,w=/^:[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*!*/,x=/^::[^.,;"{()=$\s]+({[^}]*}+)*/,y={startState:function(){return{tokenize:f,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,charsAdvanced:0,firstParenPos:-1}},token:function(a,b){var c=b.tokenize(a,b),d=a.current();return d&&c&&(b.lastToken=d),"."===d&&(c=a.match(l,!1)||a.match(v,!1)||a.match(/\(/,!1)?"operator":i),c},indent:function(b,c){var d=0;return("end"==c||"]"==c||"}"==c||"else"==c||"elseif"==c||"catch"==c||"finally"==c)&&(d=-1),(b.scopes.length+d)*a.indentUnit},lineComment:"#",fold:"indent",electricChars:"edlsifyh]}"};return y}),a.defineMIME("text/x-julia","julia")});
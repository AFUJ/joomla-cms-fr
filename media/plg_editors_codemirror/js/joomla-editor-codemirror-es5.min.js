!function(){"use strict";function t(t,e,n,r,o,i,s){try{var c=t[i](s),a=c.value}catch(t){return void n(t)}c.done?e(a):Promise.resolve(a).then(r,o)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function i(t,e,n){return(i=o()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i}).apply(null,arguments)}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(o=t,-1===Function.toString.call(o).indexOf("[native code]")))return t;var o;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,s)}function s(){return i(t,arguments,n(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),r(s,t)})(t)}var c=function(n){var o,i;function s(){var t;return(t=n.call(this)||this).instance="",t.host=window.location.origin,t.element=t.querySelector("textarea"),t.refresh=t.refresh.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)),t}i=n,(o=s).prototype=Object.create(i.prototype),o.prototype.constructor=o,r(o,i);var c,a,u,l=s.prototype;return l.attributeChangedCallback=function(t,e,n){switch(t){case"options":e&&n!==e&&this.refresh(this.element)}},l.connectedCallback=function(){var e,n=(e=regeneratorRuntime.mark((function t(){var e,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getAttribute("editor"),n=this.getAttribute("addons"),t.next=4,import(this.host+"/"+e);case 4:if(!this.options.keyMapUrl){t.next=7;break}return t.next=7,import(this.host+"/"+this.options.keyMapUrl);case 7:return t.next=9,import(this.host+"/"+n);case 9:r=this,window.CodeMirror.modeURL=this.getAttribute("mod-path"),window.CodeMirror.defineInitHook((function(t){var e,n=window.CodeMirror.findModeByName(t.options.mode||"")||window.CodeMirror.findModeByExtension(t.options.mode||"");window.CodeMirror.autoLoadMode(t,"object"==typeof n?n.mode:t.options.mode),n&&n.mime&&(["text/x-php","application/x-httpd-php","application/x-httpd-php-open"].includes(n.mime)?t.setOption("mode","php"):t.setOption("mode",n.mime));var o=function(){r.instance.setOption("fullScreen",!r.instance.getOption("fullScreen"));var t=document.getElementById("subhead");t&&(document.getElementById("header").classList.toggle("hidden"),t.classList.toggle("hidden"),r.instance.display.wrapper.style.top=t.getBoundingClientRect().height+"px")},i=((e={"Ctrl-Q":o})[r.getAttribute("fs-combo")]=o,e.Esc=function(){if(r.instance.getOption("fullScreen"),r.instance.setOption("fullScreen",!1),!r.instance.getOption("fullScreen")){var t=document.getElementById("subhead");if(t){var e=document.getElementById("header");t.classList.toggle("hidden"),e.classList.toggle("hidden"),r.instance.display.wrapper.style.top=t.getBoundingClientRect().height+"px"}}},e);t.addKeyMap(i),t.on("gutterClick",(function(t,e,n){if("CodeMirror-markergutter"===n){var r,o=t.lineInfo(e),i=!!o.gutterMarkers&&!!o.gutterMarkers["CodeMirror-markergutter"];t.setGutterMarker(e,"CodeMirror-markergutter",i?null:((r=document.createElement("div")).className="CodeMirror-markergutter-mark",r))}})),"fieldset"===r.parentNode.tagName.toLowerCase()&&(r.parentNode.style.minWidth=0)})),this.instance=window.CodeMirror.fromTextArea(this.element,this.options),this.instance.disable=function(t){return o.setOption("readOnly",!!t&&"nocursor")},Joomla.editors.instances[this.element.id]=this.instance;case 15:case"end":return t.stop()}}),t,this)})),function(){var n=this,r=arguments;return new Promise((function(o,i){var s=e.apply(n,r);function c(e){t(s,o,i,c,a,"next",e)}function a(e){t(s,o,i,c,a,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),l.disconnectedCallback=function(){delete Joomla.editors.instances[this.element.id]},l.refresh=function(t){this.instance.fromTextArea(t,this.options)},c=s,u=[{key:"observedAttributes",get:function(){return["options"]}}],(a=[{key:"options",get:function(){return JSON.parse(this.getAttribute("options"))},set:function(t){this.setAttribute("options",t)}}])&&e(c.prototype,a),u&&e(c,u),s}(s(HTMLElement));customElements.define("joomla-editor-codemirror",c)}();
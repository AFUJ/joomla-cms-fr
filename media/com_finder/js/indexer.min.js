((e,r)=>{if(!e)throw new Error("core.js was not properly initialised");e.finderIndexer=()=>{let t,n=null,s=null,d=null,a=!1;const o=`&${r.getElementById("finder-indexer-token").getAttribute("name")}=1`,i=e=>{const t=r.getElementById(e);return t?t.parentNode.removeChild(t):null},l=(o,l)=>{const c=r.getElementById("finder-progress-header"),E=r.getElementById("finder-progress-message");try{if(null===o)throw new Error(l);if(o.error)throw new Error(o);if(o.start&&(n=o.totalItems,r.getElementById("finder-debug-data"))){const e=r.getElementById("finder-debug-data");Object.entries(o.pluginState).forEach((r=>{let t=`<dt class="col-sm-3">${r[0]}</dt>`;t+=`<dd id="finder-${r[0].replace(/\s+/g,"-").toLowerCase()}" class="col-sm-9"></dd>`,e.insertAdjacentHTML("beforeend",t)}))}s+=o.batchOffset,((t,a)=>{d=s/n*100;const o=r.getElementById("progress-bar"),l=r.getElementById("finder-progress-header"),c=r.getElementById("finder-progress-message");l&&(l.innerText=t),c&&(c.innerHTML=a),o&&(d<100?(o.style.width=`${d}%`,o.setAttribute("aria-valuenow",d)):(o.classList.remove("bar-success"),o.classList.add("bar-warning"),o.setAttribute("aria-valuemin",100),o.setAttribute("aria-valuemax",200),o.style.width=`${d}%`,o.setAttribute("aria-valuenow",d)),a===e.Text._("COM_FINDER_INDEXER_MESSAGE_COMPLETE")&&(i("progress"),window.parent.Joomla.Modal.getCurrent().close()))})(o.header,o.message),r.getElementById("finder-debug-data")&&Object.entries(o.pluginState).forEach((e=>{r.getElementById(`finder-${e[0].replace(/\s+/g,"-").toLowerCase()}`).innerHTML=`${o.pluginState[e[0]].offset} of ${o.pluginState[e[0]].total}`})),s<n?t("indexer.batch"):a||(a=!0,t("indexer.optimize"))}catch(r){i("progress");try{o.error&&(c&&(c.innerText=o.header,c.classList.add("finder-error")),E&&(E.innerHTML=o.message,E.classList.add("finder-error")))}catch(t){""===r&&(r=e.JText._("COM_FINDER_NO_ERROR_RETURNED")),c&&(c.innerText=e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),c.classList.add("finder-error")),E&&(E.innerHTML=r,E.classList.add("finder-error"))}}return!0};t=t=>{e.request({url:`index.php?option=com_finder&tmpl=component&format=json&task=${t}${o}`,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:e=>{l(JSON.parse(e))},onError:t=>{(t=>{const n=r.getElementById("finder-progress-header"),s=r.getElementById("finder-progress-message");let d="object"==typeof t&&t.responseText?t.responseText:null;d=d?JSON.parse(d):null,i("progress");const a=d?d.header:e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),o=d?d.message:`${e.JText._("COM_FINDER_MESSAGE_RETURNED")}<br>${d}`;n&&(n.innerText=a,n.classList.add("finder-error")),s&&(s.innerHTML=o,s.classList.add("finder-error"))})(t)}})};s=0,d=0,t("indexer.start")}})(Joomla,document),document.addEventListener("DOMContentLoaded",(()=>{window.Indexer=Joomla.finderIndexer()}));
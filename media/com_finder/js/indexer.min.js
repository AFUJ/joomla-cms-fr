((e,t)=>{if(!e)throw new Error("core.js was not properly initialised");e.finderIndexer=()=>{let r,n=null,s=null,a=null,d=!1;const i=`&${t.getElementById("finder-indexer-token").getAttribute("name")}=1`,o=e=>{const r=t.getElementById(e);return r?r.parentNode.removeChild(r):null},l=(i,l)=>{const m=t.getElementById("finder-progress-header"),c=t.getElementById("finder-progress-message");try{if(null===i)throw new Error(l);if(i.error)throw new Error(i);if(i.start&&(n=i.totalItems,t.getElementById("finder-debug-data"))){const r=t.getElementById("finder-debug-data");Object.entries(i.pluginState).forEach((t=>{let n=`<dt class="col-sm-3">${t[0]}</dt>`;n+=`<dd id="finder-${t[0].replace(/\s+/g,"-").toLowerCase()}" class="col-sm-9"></dd>`,r.insertAdjacentHTML("beforeend",e.sanitizeHtml(n))}))}s+=i.batchOffset,((r,d)=>{a=s/n*100;const i=t.getElementById("progress-bar"),l=t.getElementById("finder-progress-header"),m=t.getElementById("finder-progress-message");l&&(l.innerText=r),m&&(m.innerHTML=e.sanitizeHtml(d)),i&&(a<100?(i.style.width=`${a}%`,i.setAttribute("aria-valuenow",a)):(i.classList.remove("bar-success"),i.classList.add("bar-warning"),i.setAttribute("aria-valuemin",100),i.setAttribute("aria-valuemax",200),i.style.width=`${a}%`,i.setAttribute("aria-valuenow",a)),d===e.Text._("COM_FINDER_INDEXER_MESSAGE_COMPLETE")&&(o("progress"),window.parent.Joomla.Modal.getCurrent().close()))})(i.header,i.message),t.getElementById("finder-debug-data")&&Object.entries(i.pluginState).forEach((r=>{t.getElementById(`finder-${r[0].replace(/\s+/g,"-").toLowerCase()}`).innerHTML=e.sanitizeHtml(`${i.pluginState[r[0]].offset} of ${i.pluginState[r[0]].total}`)})),s<n?r("indexer.batch"):d||(d=!0,r("indexer.optimize"))}catch(t){o("progress");try{i.error&&(m&&(m.innerText=i.header,m.classList.add("finder-error")),c&&(c.innerHTML=e.sanitizeHtml(i.message),c.classList.add("finder-error")))}catch(r){""===t&&(t=e.Text._("COM_FINDER_NO_ERROR_RETURNED")),m&&(m.innerText=e.Text._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),m.classList.add("finder-error")),c&&(c.innerHTML=e.sanitizeHtml(t),c.classList.add("finder-error"))}}return!0};r=r=>{e.request({url:`index.php?option=com_finder&tmpl=component&format=json&task=${r}${i}`,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:e=>{l(JSON.parse(e))},onError:r=>{(r=>{const n=t.getElementById("finder-progress-header"),s=t.getElementById("finder-progress-message");let a="object"==typeof r&&r.responseText?r.responseText:null;a=a?JSON.parse(a):null,o("progress");const d=a?a.header:e.Text._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),i=a?a.message:`${e.Text._("COM_FINDER_MESSAGE_RETURNED")}<br>${a}`;n&&(n.innerText=d,n.classList.add("finder-error")),s&&(s.innerHTML=e.sanitizeHtml(i),s.classList.add("finder-error"))})(r)}})};s=0,a=0,r("indexer.start")}})(Joomla,document),document.addEventListener("DOMContentLoaded",(()=>{window.Indexer=Joomla.finderIndexer()}));
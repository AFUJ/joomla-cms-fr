!function(){"use strict";!function(e,t){if(!e)throw new Error("core.js was not properly initialised");e.finderIndexer=function(){var r,n=null,s=null,i=null,a=!1,d="&"+t.getElementById("finder-indexer-token").getAttribute("name")+"=1",o=function(e){var r=t.getElementById(e);return r?r.parentNode.removeChild(r):null},l=function(d,l){var c=t.getElementById("finder-progress-header"),f=t.getElementById("finder-progress-message");try{if(null===d)throw new Error(l);if(d.error)throw new Error(d);if(d.start&&(n=d.totalItems,t.getElementById("finder-debug-data"))){var u=t.getElementById("finder-debug-data");Object.entries(d.pluginState).forEach((function(t){var r='<dt class="col-sm-3">'+t[0]+"</dt>";r+='<dd id="finder-'+t[0].replace(/\s+/g,"-").toLowerCase()+'" class="col-sm-9"></dd>',u.insertAdjacentHTML("beforeend",e.sanitizeHtml(r,{dd:["class","id"],dt:["class"]}))}))}s+=d.batchOffset,function(r,a){i=s/n*100;var d=t.getElementById("progress-bar"),l=t.getElementById("finder-progress-header"),c=t.getElementById("finder-progress-message");l&&(l.innerText=r),c&&(c.innerHTML=e.sanitizeHtml(a)),d&&(i<100?(d.style.width=i+"%",d.setAttribute("aria-valuenow",i)):(d.classList.remove("bar-success"),d.classList.add("bar-warning"),d.setAttribute("aria-valuemin",100),d.setAttribute("aria-valuemax",200),d.style.width=i+"%",d.setAttribute("aria-valuenow",i)),a===e.Text._("COM_FINDER_INDEXER_MESSAGE_COMPLETE")&&(o("progress"),window.parent.Joomla.Modal.getCurrent().close()))}(d.header,d.message),t.getElementById("finder-debug-data")&&Object.entries(d.pluginState).forEach((function(r){t.getElementById("finder-"+r[0].replace(/\s+/g,"-").toLowerCase()).innerHTML=e.sanitizeHtml(d.pluginState[r[0]].offset+" of "+d.pluginState[r[0]].total)})),s<n?r("indexer.batch"):a||(a=!0,r("indexer.optimize"))}catch(t){o("progress");try{d.error&&(c&&(c.innerText=d.header,c.classList.add("finder-error")),f&&(f.innerHTML=e.sanitizeHtml(d.message),f.classList.add("finder-error")))}catch(r){""===t&&(t=e.Text._("COM_FINDER_NO_ERROR_RETURNED")),c&&(c.innerText=e.Text._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),c.classList.add("finder-error")),f&&(f.innerHTML=e.sanitizeHtml(t),f.classList.add("finder-error"))}}return!0};s=0,i=0,(r=function(r){e.request({url:"index.php?option=com_finder&tmpl=component&format=json&task="+r+d,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:function(e){l(JSON.parse(e))},onError:function(r){!function(r){var n=t.getElementById("finder-progress-header"),s=t.getElementById("finder-progress-message"),i="object"==typeof r&&r.responseText?r.responseText:null;i=i?JSON.parse(i):null,o("progress");var a=i?i.header:e.Text._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),d=i?i.message:e.Text._("COM_FINDER_MESSAGE_RETURNED")+"<br>"+i;n&&(n.innerText=a,n.classList.add("finder-error")),s&&(s.innerHTML=e.sanitizeHtml(d),s.classList.add("finder-error"))}(r)}})})("indexer.start")}}(Joomla,document),document.addEventListener("DOMContentLoaded",(function(){window.Indexer=Joomla.finderIndexer()}))}();
!function(){"use strict";!function(e,r){if(!e)throw new Error("core.js was not properly initialised");e.finderIndexer=function(){var t,n=null,s=null,a=null,d=!1,i="&"+r.getElementById("finder-indexer-token").getAttribute("name")+"=1",o=function(e){var t=r.getElementById(e);return t?t.parentNode.removeChild(t):null},l=function(i,l){var c=r.getElementById("finder-progress-header"),f=r.getElementById("finder-progress-message");try{if(null===i)throw new Error(l);if(i.error)throw new Error(i);if(i.start&&(n=i.totalItems,r.getElementById("finder-debug-data"))){var u=r.getElementById("finder-debug-data");Object.entries(i.pluginState).forEach((function(e){var r='<dt class="col-sm-3">'+e[0]+"</dt>";r+='<dd id="finder-'+e[0].replace(/\s+/g,"-").toLowerCase()+'" class="col-sm-9"></dd>',u.insertAdjacentHTML("beforeend",r)}))}s+=i.batchOffset,function(t,d){a=s/n*100;var i=r.getElementById("progress-bar"),l=r.getElementById("finder-progress-header"),c=r.getElementById("finder-progress-message");l&&(l.innerText=t),c&&(c.innerHTML=d),i&&(a<100?(i.style.width=a+"%",i.setAttribute("aria-valuenow",a)):(i.classList.remove("bar-success"),i.classList.add("bar-warning"),i.setAttribute("aria-valuemin",100),i.setAttribute("aria-valuemax",200),i.style.width=a+"%",i.setAttribute("aria-valuenow",a)),d===e.Text._("COM_FINDER_INDEXER_MESSAGE_COMPLETE")&&(o("progress"),window.parent.Joomla.Modal.getCurrent().close()))}(i.header,i.message),r.getElementById("finder-debug-data")&&Object.entries(i.pluginState).forEach((function(e){r.getElementById("finder-"+e[0].replace(/\s+/g,"-").toLowerCase()).innerHTML=i.pluginState[e[0]].offset+" of "+i.pluginState[e[0]].total})),s<n?t("indexer.batch"):d||(d=!0,t("indexer.optimize"))}catch(r){o("progress");try{i.error&&(c&&(c.innerText=i.header,c.classList.add("finder-error")),f&&(f.innerHTML=i.message,f.classList.add("finder-error")))}catch(t){""===r&&(r=e.JText._("COM_FINDER_NO_ERROR_RETURNED")),c&&(c.innerText=e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),c.classList.add("finder-error")),f&&(f.innerHTML=r,f.classList.add("finder-error"))}}return!0};s=0,a=0,(t=function(t){e.request({url:"index.php?option=com_finder&tmpl=component&format=json&task="+t+i,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:function(e){l(JSON.parse(e))},onError:function(t){!function(t){var n=r.getElementById("finder-progress-header"),s=r.getElementById("finder-progress-message"),a="object"==typeof t&&t.responseText?t.responseText:null;a=a?JSON.parse(a):null,o("progress");var d=a?a.header:e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),i=a?a.message:e.JText._("COM_FINDER_MESSAGE_RETURNED")+"<br>"+a;n&&(n.innerText=d,n.classList.add("finder-error")),s&&(s.innerHTML=i,s.classList.add("finder-error"))}(t)}})})("indexer.start")}}(Joomla,document),document.addEventListener("DOMContentLoaded",(function(){window.Indexer=Joomla.finderIndexer()}))}();
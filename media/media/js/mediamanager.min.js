!function(e,t){"use strict";function r(t){var r={};return t=t||"",e.each(t.split(/[&;]/),function(e,t){var a=t.split("=");r[decodeURIComponent(a[0])]=2==a.length?decodeURIComponent(a[1]):null}),r}function a(t){var r={},a=t.match(/^(?:([^:\/?#.]+):)?(?:\/\/)?(([^:\/?#]*)(?::(\d*))?)((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[\?#]|$)))*\/?)?([^?#\/]*))?(?:\?([^#]*))?(?:#(.*))?/);return e.each(["uri","scheme","authority","domain","port","path","directory","file","query","fragment"],function(e,t){r[t]=a&&a[e]?a[e]:""}),r}function o(e){return e.scheme+"://"+e.domain+(e.port?":"+e.port:"")+(e.path?e.path:"/")+(e.query?"?"+e.query:"")+(e.fragment?"#"+e.fragment:"")}var n=t.MediaManager={initialize:function(){this.folderpath=e("#folderpath"),this.updatepaths=e("input.update-folder"),this.frame=window.frames.folderframe,this.frameurl=this.frame.location.href},submit:function(t){form=this.frame.document.getElementById("mediamanager-form"),form.task.value=t,e("#username").length&&(form.username.value=e("#username").val(),form.password.value=e("#password").val()),form.submit()},onloadframe:function(){this.frameurl=this.frame.location.href;var t,n,i=this.getFolder()||"",l=[],u=a(e("#uploadForm").attr("action")),f=r(u.query);this.updatepaths.each(function(e,t){t.value=i}),this.folderpath.value=basepath+(i?"/"+i:""),f.folder=i;for(t in f)f.hasOwnProperty(t)&&(n=f[t],l.push(t+(null===n?"":"="+n)));u.query=l.join("&"),u.fragment=null,e("#uploadForm").attr("action",o(u)),e("#"+viewstyle).addClass("active")},setViewType:function(t){e("#"+t).addClass("active"),e("#"+viewstyle).removeClass("active"),viewstyle=t;var r=this.getFolder();this.setFrameUrl("index.php?option=com_media&view=mediaList&tmpl=component&folder="+r+"&layout="+t)},refreshFrame:function(){this.setFrameUrl()},getFolder:function(){var e=r(this.frame.location.search.substring(1));return e.folder=void 0===e.folder?"":e.folder,e.folder},setFrameUrl:function(e){null!==e&&(this.frameurl=e),this.frame.location.href=this.frameurl}};e(function(){n.initialize(),document.updateUploader=function(){n.onloadframe()},n.onloadframe()})}(jQuery,window);